@page "/crew"
@inject HttpClient Http


 <BodyElement CssClass="crew" />

   <main id="main" class="grid-container grid-container--crew flow">

      <NumberedTitle TitleNumber=2>Meet your crew</NumberedTitle>
       @if (CrewMembers == null)
{
    <p><em>Loading...</em></p>
}
else
{
    @foreach(Member crewmember in CrewMembers)
    {
        bool IsVisible = crewmember.Index == targetPanel;
        if(IsVisible) {
        <div role="tablist" @onkeydown="ChangeTabFocus" aria-label="crew member list" class="dot-indicators flex">
                @foreach(Member tab in CrewMembers)
                { 
                   <button @onclick="() => ChangeTabPanel(tab.Index)"  aria-selected="@(tabPosition == tab.Index ? "true" : "false")" 
                       role="tab" tabindex="@(tabPosition == tab.Index ? 0 : -1)" aria-controls="@tab.Index-tab">
                       <span class="sr-only">@tab.Title</span></button>
                }
        </div>
        <article class="crew-details flow flow--space-small @(!IsVisible ? "hidden": "")" id="@crewmember.Index-tab" role="tabpanel" tabindex="@(IsVisible ? 0 : -1)">
            <header class="flow">
                <h2 class="fs-600 ff-seriff uppercase">@crewmember.Title</h2>
                <p class="fs-700 uppercase ff-serif">@crewmember.MemberName</p>
            </header>
            <p>@crewmember.Description</p>
        </article>
        <div class="images" >
            <img class="@(!IsVisible? "hidden": "")" src="@crewmember.Image"  alt="@crewmember.ImageAlt"/>
        </div>
        }
    }
   }
  </main>
  
